<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>웹 프론트엔드 개발 3주차 수업</title>
    <link href="css/style.css" rel="stylesheet">
</head>

<body>
	<div class="container">
		<h3 class="title">회원정보수정</h3>
		<form>
		    <div>
		        <h4 class="sub-title">기본정보</h4>
		        <table class="user-table">
		        	<colgroup>
		        		<col style="width:30%;">
		        		<col style="width:70%;">
		        	</colgroup>
		            <tr>
		                <td>
		                    <label>아이디<span style="padding: 8px 5px 0px;color: #bb162b;">*</span></label>
		                </td>
		                <td>
		                    <span id="user_id"></span>
		                </td>
		            </tr>
		            <tr>
		                <td>
		                    <label class="asterisk">현재 비밀번호</label>
		                </td>
		                <td>
		                    <input type="password" id="current_password">
		                </td>
		            </tr>
		            <tr>
		                <td>
		                    <label class="asterisk">새비밀번호</label>
		                </td>
		                <td>
		                    <input type="password" id="new_password">
		                </td>
		            </tr>
		            <tr>
		                <td>
		                    <label class="asterisk">비밀번호확인</label>
		                </td>
		                <td>
		                    <input type="password" id="confirm_password">
		                </td>
		            </tr>
		            <tr>
		                <td>
		                    <label class="asterisk">이름</label>
		                </td>
		                <td>
		                    <span id="user_name"></span>
		                </td>
		            </tr>
		            <tr>
		                <td>
		                    <label class="asterisk">이메일주소</label>
		                </td>
		                <td>
		                    <input type="email" id="email" value="gildong@gmail.com">
		                </td>
		            </tr>
		            <tr>
		                <td>
		                    <label class="asterisk">주민등록번호</label>
		                </td>
		                <td>
		                    <span id="social_number"></span>
		                </td>
		            </tr>
		            <tr>
		                <td>
		                    <label>생년월일</label>
		                </td>
		                <td>
		                    <span id="birth_date"></span>
		                </td>
		            </tr>
		            <tr>
		                <td>
		                    <label>성별</label>
		                </td>
		                <td>
		                    <span id="gender"></span>
		                </td>
		            </tr>
		            <tr>
		                <td>
		                    <label class="asterisk">주소</label>
		                </td>
		                <td>
		                    <input type="text" maxlength="5" size="5"> <input type="button" value="찾아보기" class="btn-primary">
		                    <br>
		                    <input type="text" style="width:90%;" placeholder="주소(국가/도/시/도로명/번지)">
		                    <br>
		                    <input type="text" style="width:90%;" placeholder="나머지주소(건물명/층수)">
		                </td>
		            </tr>
		            <tr>
		                <td>
		                    <label class="asterisk">핸드폰</label>
		                </td>
		                <td>
		                    <input type="text" maxlength="3" size="3" value="010">-
		                    <input type="text" maxlength="4" size="4" value="1234">-
		                    <input type="text" maxlength="4" size="4" value="2222">
		                </td>
		            </tr>
		        </table>
		    </div>
		    <div>
		        <h4 class="sub-title">추가정보</h4>
		        <table class="user-table">
		        	<colgroup>
		        		<col style="width:30%;">
		        		<col style="width:70%;">
		        	</colgroup>
		            <tr>
		                <td>
		                    <label>홈페이지</label>
		                </td>
		                <td>
		                    <input type="url" id="homepage" style="width:90%;" value="">
		                </td>
		            </tr>
		            <tr>
		                <td>
		                    <label>혼인여부</label>
		                </td>
		                <td>
		                    <label><input type="radio" name="marriage_yn" value="Y"> 기혼</label>
		                    <label><input type="radio" name="marriage_yn" value="N"> 미혼</label>
		                </td>
		            </tr>
		            <tr>
		                <td>
		                    <label>관심분야</label>
		                </td>
		                <td>
		                    <label><input type="checkbox" name="interest_area" value="I001"> IT/컴퓨터</label>
		                    <label><input type="checkbox" name="interest_area" value="I002"> 엔터테인먼트</label>
		                    <label><input type="checkbox" name="interest_area" value="I003"> 스포츠</label>
		                    <label><input type="checkbox" name="interest_area" value="I004"> 쇼핑</label>
		                    <label><input type="checkbox" name="interest_area" value="I005"> 도서/책</label>
		                </td>
		            </tr>
		            <tr>
		                <td>
		                    <label>메일수신동의</label>
		                </td>
		                <td>
		                    <label><input type="radio" name="email_yn" value="Y"> 동의</label>
		                    <label><input type="radio" name="email_yn" value="N"> 거부</label>
		                </td>
		            </tr>
		            <tr>
		                <td>
		                    <label>문자수신동의</label>
		                </td>
		                <td>
		                    <label><input type="radio" name="msg_yn" value="Y"> 동의</label>
		                    <label><input type="radio" name="msg_yn" value="N"> 거부</label>
		                </td>
		            </tr>
		        </table>
		    </div>
		</form>
		<div class="btn-area">
	    	<button class="btn-danger" onclick="doSave();">저장</button>
	    	<button class="btn-default" onclick="goList();">리스트</button>
	    </div>
	</div>

	<!-- Script 작성 영역 -->
	<script src="js/util.js"></script>
	<!-- <script src="js/jquery-2.1.1.js"></script> -->
    <script>
    	function doSave(){
    		var pw = document.querySelector('#current_password').value;
    		var npw = document.querySelector('#new_password').value;
    		var cpw = document.querySelector('#confirm_password').value;

    		var email = document.querySelector('#email').value;

    		var mobile1 = document.querySelector('#mobile1').value;
    		var mobile2 = document.querySelector('#mobile2').value;
    		var mobile3 = document.querySelector('#mobile3').value;

    		var homepage = document.querySelector('#homepage').value;
    		var marriage_yn = document.querySelector('[name=marriage_yn]:checked').value;
    		var oInterest = document.querySelectorAll('[name=interest_area]:checked');
    		var email_yn = document.querySelector('[name=email_yn]:checked').value;
    		var msg_yn = document.querySelector('[name=msg_yn]:checked').value;


    		data["EMAIL"] = email;
    		data["MOBILE1"] = mobile1;
    		data["MOBILE2"] = mobile2;
    		data["MOBILE3"] = mobile3;
    		data["HOMEPAGE"] = homepage;
    		data["MARRIAGE_YN"] = marriage_yn;
    		data["EMAIL_YN"] = email_yn;
    		data["MSG_YN"] = msg_yn;

    		var int_area = [];
    		for(var i=0 ; i<oInterest.length ; i++){
    			int_area.push(oInterest[i].value);
    		}

    		data["INT_AREA"] = int_area;

    	// 	$.ajax({
	    //          url: "update_server_url",
	    //          async: true,
	    //          header: {},
	    //          data: JSON.stringify(data),
	    //          type: "POST",
	    //          success: function(data) {
					// document.location.href = '-12_user_detail.html';	                
	    //          },
	    //          error:function(jqxhr, textStatus, error){
	    //             var err = textStatus + ", " + error;
	    //             console.log(err);
	    //          }
	    //     });
    	}

    	function goList(){
    		window.location.href = '013_user_list.html';
    	}

    	var data = {
    		"USER_ID":"paullab0001",
    		"USER_NAME":"홍길동",
    		"EMAIL":"gildong@gmail.com",
    		"SOCIAL_NUMBER":"951201-*******",
    		"BIRTH_DATE":"1995년 2월 18일",
    		"GNEDER":"M",
    		"ADDRESS":"대한민국 제주특별자치도 제주시",
    		"MOBILE":"010-1233-3456",
    		"HOMEPAGE":"http://gildong.co.kr",
    		"MARRIAGE":"N",
    		"INT_AREA":["I001","I002"],
    		"EMAIL_YN":"Y",
    		"MSG_YN":"N",
    	};

    	function loadData(){
    		document.querySelector('#user_id').innerHTML = data['USER_ID'];
    		document.querySelector('#user_name').innerHTML = data['USER_NAME'];
    		document.querySelector('#email').value = data['EMAIL'];
    		document.querySelector('#social_number').innerHTML = data['SOCIAL_NUMBER'];
    		document.querySelector('#birth_date').innerHTML = data['BIRTH_DATE'];

    		if(data['GNEDER'] == 'M'){
    			document.querySelector('#gender').innerHTML = '남자';
    		}else if(data['GNEDER'] == 'F'){
    			document.querySelector('#gender').innerHTML = '여자';
    		}

    		// document.querySelector('#address').value = data['ADDRESS'];
    		// document.querySelector('#mobile').value = data['MOBILE'];

    		var oMarriage = document.querySelectorAll('[name=marriage_yn]');

    		for(var i=0 ; i<oMarriage.length ; i++){
    			if(oMarriage[i].value == data['MARRIAGE']) oMarriage[i].checked = true;
    		}

    		document.querySelector('#homepage').value = data['HOMEPAGE'];

    		var int_area = {};
    		for(var i=0 ; i<data['INT_AREA'].length ; i++){
    			var v = data["INT_AREA"][i];
    			int_area[v] = v;
    		}

    		var oInterest = document.querySelectorAll('[name=interest_area]');
    		var len = oInterest.length;
    		for(var i=0 ; i<len ; i++){
    			if(int_area[oInterest[i].value] != undefined) oInterest[i].checked = true;
    		}

    		var oEmailYN = document.querySelectorAll('[name=email_yn]');

    		for(var i=0 ; i<oEmailYN.length ; i++){
    			if(oEmailYN[i].value == data['EMAIL_YN']) oEmailYN[i].checked = true;
    		}

    		var oMsgYn = document.querySelectorAll('[name=msg_yn]');

    		for(var i=0 ; i<oMsgYn.length ; i++){
    			if(oMsgYn[i].value == data['MSG_YN']) oMsgYn[i].checked = true;
    		}
    	}

    	window.onload = function(){
    		loadData();
    	}
    </script>
</body>

</html>
